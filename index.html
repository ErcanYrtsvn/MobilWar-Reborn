<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>MobilWar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #1e1e1e;
      color: #f0f0f0;
    }
    header {
      background-color: #2a2a2a;
      padding: 1em;
      text-align: center;
      font-size: 1.5em;
      color: #00ff99;
    }
    .container {
      padding: 1em;
      max-width: 600px;
      margin: auto;
    }
    .resource-bar {
      background: #333;
      padding: 1em;
      border-radius: 10px;
      margin-bottom: 1em;
      display: flex;
      justify-content: space-around;
    }
    .building {
      background: #2a2a2a;
      margin: 0.5em 0;
      padding: 1em;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .building img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
    }
    .building-info {
      display: flex;
      align-items: center;
    }
    button {
      padding: 0.5em 1em;
      background: #00ff99;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #usernameInput {
      padding: 0.5em;
      margin: 1em 0;
      width: 100%;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <header>MobilWar</header>

  <div class="container" id="loginScreen">
    <p>Lütfen kullanıcı adınızı girin:</p>
    <input type="text" id="usernameInput" placeholder="Kullanıcı adı">
    <button onclick="startGame()">Başla</button>
  </div>

  <div class="container hidden" id="gameScreen">
    <div><strong>Oyuncu:</strong> <span id="playerName"></span></div>
    <div class="resource-bar">
      <div>Metal: <span id="metal">0</span></div>
      <div>Petrol: <span id="petrol">0</span></div>
      <div>Enerji: <span id="enerji">0</span></div>
    </div>

    <div class="building">
      <div class="building-info">
        <img src="https://img.icons8.com/ios-filled/50/f0f0f0/mine.png"/>
        <div>Maden Lv <span id="madenLv">1</span></div>
      </div>
      <button onclick="upgrade('maden')">Geliştir</button>
    </div>

    <div class="building">
      <div class="building-info">
        <img src="https://img.icons8.com/ios-filled/50/f0f0f0/oil-industry.png"/>
        <div>Rafineri Lv <span id="rafineriLv">1</span></div>
      </div>
      <button onclick="upgrade('rafineri')">Geliştir</button>
    </div>

    <div class="building">
      <div class="building-info">
        <img src="https://img.icons8.com/ios-filled/50/f0f0f0/military-camp.png"/>
        <div>Kışla Lv <span id="kislaLv">1</span></div>
      </div>
      <button onclick="upgrade('kisla')">Geliştir</button>
    </div>

    <div class="building">
      <div class="building-info">
        <img src="https://img.icons8.com/ios-filled/50/f0f0f0/factory.png"/>
        <div>Fabrika Lv <span id="fabrikaLv">1</span></div>
      </div>
      <button onclick="upgrade('fabrika')">Geliştir</button>
    </div>
  </div>

  <script>
    let state = {
      username: '',
      metal: 0,
      petrol: 0,
      enerji: 0,
      madenLv: 1,
      rafineriLv: 1,
      kislaLv: 1,
      fabrikaLv: 1
    };

    function saveGame() {
      localStorage.setItem('mobilwar_save', JSON.stringify(state));
    }

    function loadGame() {
      const data = localStorage.getItem('mobilwar_save');
      if (data) {
        state = JSON.parse(data);
      }
    }

    function updateUI() {
      document.getElementById("metal").innerText = state.metal;
      document.getElementById("petrol").innerText = state.petrol;
      document.getElementById("enerji").innerText = state.enerji;
      document.getElementById("madenLv").innerText = state.madenLv;
      document.getElementById("rafineriLv").innerText = state.rafineriLv;
      document.getElementById("kislaLv").innerText = state.kislaLv;
      document.getElementById("fabrikaLv").innerText = state.fabrikaLv;
      document.getElementById("playerName").innerText = state.username;
    }

    function startGame() {
      const username = document.getElementById("usernameInput").value.trim();
      if (!username) return alert("Kullanıcı adı gerekli");
      state.username = username;
      saveGame();
      document.getElementById("loginScreen").classList.add("hidden");
      document.getElementById("gameScreen").classList.remove("hidden");
      updateUI();
    }

    function upgrade(building) {
      let cost = (level) => 20 + level * 30;
      switch (building) {
        case 'maden':
          if (state.metal >= cost(state.madenLv)) {
            state.metal -= cost(state.madenLv);
            state.madenLv++;
          }
          break;
        case 'rafineri':
          if (state.petrol >= cost(state.rafineriLv)) {
            state.petrol -= cost(state.rafineriLv);
            state.rafineriLv++;
          }
          break;
        case 'kisla':
          if (state.enerji >= cost(state.kislaLv)) {
            state.enerji -= cost(state.kislaLv);
            state.kislaLv++;
          }
          break;
        case 'fabrika':
          if (state.metal >= cost(state.fabrikaLv) && state.petrol >= cost(state.fabrikaLv)) {
            state.metal -= cost(state.fabrikaLv);
            state.petrol -= cost(state.fabrikaLv);
            state.fabrikaLv++;
          }
          break;
      }
      updateUI();
      saveGame();
    }

    function autoGenerateResources() {
      state.metal += state.madenLv * 2;
      state.petrol += state.rafineriLv * 2;
      state.enerji += state.kislaLv + state.fabrikaLv;
      updateUI();
      saveGame();
    }

    // Başlangıç
    loadGame();
    if (state.username) {
      document.getElementById("loginScreen").classList.add("hidden");
      document.getElementById("gameScreen").classList.remove("hidden");
      updateUI();
    }
    setInterval(autoGenerateResources, 5000);
  </script>

</body>
</html>
